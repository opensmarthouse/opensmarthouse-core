<?xml version="1.0" encoding="UTF-8"?>
<!--

	Copyright (c) 2020-2020 Contributors to the OpenSmartHouse project
	Copyright (c) 2010-2020 Contributors to the openHAB project

	See the NOTICE file(s) distributed with this work for additional
	information.

	This program and the accompanying materials are made available under the
	terms of the Eclipse Public License 2.0 which is available at
	http://www.eclipse.org/legal/epl-2.0

	SPDX-License-Identifier: EPL-2.0

-->
<features name="${project.artifactId}-${project.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.3.0">

	<repository>mvn:org.opensmarthouse.core.features.karaf/org.opensmarthouse.core.features.karaf.opensmarthouse-tp/${project.version}/xml/features</repository>

	<feature name="opensmarthouse-core-base" description="opensmarthouse Core" version="${project.version}">
		<details>Open SmartHouse Core Bundles</details>

		<requirement>opensmarthouse.tp;filter:="(feature=base)"</requirement>
		<feature dependency="true">opensmarthouse.tp-base</feature>

		<feature dependency="true">opensmarthouse.tp-gson</feature>

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=xtext)(version&gt;=2.19.0)(!(version&gt;=2.20.0)))"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=jax-rs)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jax-rs</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=httpclient)"</requirement>
		<feature dependency="true">opensmarthouse.tp-httpclient</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.core/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.discovery/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.dispatch/${project.version}</bundle>
		<bundle start-level="75">mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.xml/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core/${project.version}</bundle>
		<feature dependency="true">opensmarthouse-core-storage-mapdb</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.id/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.persistence/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.semantics/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.scheduler/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.thing/${project.version}</bundle>
		<bundle start-level="75">mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.thing.xml/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.transform/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.audio/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.voice/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.console/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.monitor/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.net/${project.version}</bundle>
		<feature dependency="true">pax-http-whiteboard</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.http/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.optimize/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.core/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.sse/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-auth-jaas" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.auth.jaas/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-auth-oauth2client" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.auth.oauth2client/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-automation" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-ephemeris</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.automation/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-automation-module-script" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature dependency="true">opensmarthouse-core-automation</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.automation.module.script/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-automation-module-script-rulesupport" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature dependency="true">opensmarthouse-core-automation</feature>
		<feature dependency="true">opensmarthouse-core-automation-module-script</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.automation.module.script.rulesupport/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-automation-module-media" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature dependency="true">opensmarthouse-core-automation</feature>
		<feature dependency="true">opensmarthouse-core-automation-module-script</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.automation.module.media/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-automation-rest" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature dependency="true">opensmarthouse-core-automation</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.automation.rest/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-config-serial" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-io-transport-serial</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.serial/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-config-discovery-usbserial" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.discovery.usbserial/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.discovery.usbserial.linuxsysfs/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-ephemeris" version="${project.version}">
		<requirement>opensmarthouse.tp;filter:="(feature=jollyday)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jollyday</feature>
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.ephemeris/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-bin2json" description="Binary to JSON converter" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.bin2json/${project.version}</bundle>
		<requirement>opensmarthouse.tp;filter:="(feature=jbbp)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jbbp</feature>
	</feature>

	<feature name="opensmarthouse-core-io-console-karaf" description="Karaf Console support for SmartHome stuff"
		version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>shell</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.console.karaf/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-http-auth" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-auth-jaas</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.http.auth/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-http-auth-basic" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.http.auth.basic/${project.version}</bundle>

		<feature>opensmarthouse-core-io-http-auth</feature>
		<config name="org.opensmarthouse.core.auth">
			enabled = true
		</config>
	</feature>

	<feature name="opensmarthouse-core-io-rest-auth" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-auth-jaas</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.auth/${project.version}</bundle>
		<requirement>opensmarthouse.tp;filter:="(feature=jose4j)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jose4j</feature>
	</feature>

	<feature name="opensmarthouse-core-io-rest-log" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.log/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-rest-sitemap" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-ui</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.sitemap/${project.version}</bundle>
		<feature dependency="true">opensmarthouse-core-model-sitemap</feature>
	</feature>

	<feature name="opensmarthouse-core-io-rest-audio" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.audio/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-rest-voice" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.voice/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-rest-mdns" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-io-transport-mdns</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.mdns/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-coap" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=coap)"</requirement>
		<feature dependency="true">opensmarthouse.tp-coap</feature>
	</feature>

	<feature name="opensmarthouse-core-io-transport-dbus" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.dbus/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-http" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=httpclient)"</requirement>
		<feature dependency="true">opensmarthouse.tp-httpclient</feature>
	</feature>

	<feature name="opensmarthouse-core-io-transport-mdns" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=jmdns)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jmdns</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.mdns/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.discovery.mdns/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-mqtt" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=hivemqclient)"</requirement>
		<feature dependency="true">opensmarthouse.tp-hivemqclient</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.mqtt/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-serial" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<requirement>osgi.service;filter:="(objectClass=org.opensmarthouse.core.io.transport.serial.SerialPortManager)"</requirement>
		<requirement>osgi.service;filter:="(objectClass=org.opensmarthouse.core.io.transport.serial.SerialPortProvider)"</requirement>
		<feature dependency="true">opensmarthouse-core-io-transport-serial-rxtx</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-serial-javacomm" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=serial)(impl=javacomm))"</requirement>
		<feature dependency="true">opensmarthouse.tp-serial-javacomm</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial.javacomm/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-serial-rxtx" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=serial)(impl=rxtx))"</requirement>
		<feature dependency="true">opensmarthouse.tp-serial-rxtx</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial.rxtx/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-serial-rfc2217" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=serial)(impl=rxtx))"</requirement>
		<feature dependency="true">opensmarthouse-core-io-transport-serial-rxtx</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=commons-net)"</requirement>
		<feature dependency="true">opensmarthouse.tp-commons-net</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.serial.rxtx.rfc2217/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-io-transport-upnp" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=jupnp)"</requirement>
		<feature dependency="true">opensmarthouse.tp-jupnp</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.transport.upnp/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.config.discovery.upnp/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse.inc-model-core" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.core/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-item" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse.inc-model-core</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.item/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.item.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-item-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-item</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.item.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-persistence" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-model-item</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.persistence/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.persistence.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-persistence-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-persistence</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.persistence.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-rule" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-model-item</feature>
		<feature>opensmarthouse-core-model-persistence</feature>
		<feature>opensmarthouse-core-model-script</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.rule/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.rule.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-rule-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-rule</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.rule.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-script" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-ephemeris</feature>
		<feature>opensmarthouse-core-model-persistence</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.script/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.script.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-script-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-script</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.script.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-sitemap" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse.inc-model-core</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.sitemap/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.sitemap.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-sitemap-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-sitemap</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.sitemap.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-thing" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-model-item</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.thing/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.thing.runtime/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-thing-ide" version="${project.version}">
		<feature dependency="true">opensmarthouse-core-model-thing</feature>

		<requirement>opensmarthouse.tp;filter:="(feature=xtext-ide)"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.thing.ide/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-model-lsp" version="${project.version}">

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=xtext-ide)(version&gt;=2.19.0)(!(version&gt;=2.20.0)))"</requirement>
		<feature dependency="true">opensmarthouse.tp-xtext-ide</feature>

		<requirement>opensmarthouse.tp;filter:="(&amp;(feature=lsp4j)(version&gt;=0.8.0)(!(version&gt;=0.9.0)))"</requirement>
		<feature dependency="true">opensmarthouse.tp-lsp4j</feature>

		<feature>opensmarthouse-core-model-item-ide</feature>
		<feature>opensmarthouse-core-model-persistence-ide</feature>
		<feature>opensmarthouse-core-model-rule-ide</feature>
		<feature>opensmarthouse-core-model-script-ide</feature>
		<feature>opensmarthouse-core-model-sitemap-ide</feature>
		<feature>opensmarthouse-core-model-thing-ide</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.model.lsp/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-storage-mapdb" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.storage.mapdb/${project.version}</bundle>

		<requirement>opensmarthouse.tp;filter:="(feature=mapdb)"</requirement>
		<feature dependency="true">opensmarthouse.tp-mapdb</feature>
	</feature>

	<feature name="opensmarthouse-core-storage-json" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>

		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.storage.json/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-ui" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-model-item</feature>
		<feature>opensmarthouse-core-model-sitemap</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.ui/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.rest.ui/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-core-ui-icon" version="${project.version}">
		<feature>opensmarthouse-core-base</feature>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.ui.icon/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-runtime-base" description="opensmarthouse Runtime Base" version="${project.version}">
		<bundle>mvn:com.google.guava/guava/18.0</bundle>
		<requirement>opensmarthouse.tp;filter:="(feature=commons-net)"</requirement>
		<feature dependency="true">opensmarthouse.tp-commons-net</feature>
		<feature>opensmarthouse-core-base</feature>
		<feature>opensmarthouse-core-auth-jaas</feature>
		<feature>opensmarthouse-core-ephemeris</feature>
		<feature>opensmarthouse-core-io-console-karaf</feature>
		<feature>opensmarthouse-core-io-http-auth</feature>
		<feature>opensmarthouse-core-io-rest-auth</feature>
		<feature>opensmarthouse-core-io-rest-sitemap</feature>
		<feature>opensmarthouse-core-io-rest-audio</feature>
		<feature>opensmarthouse-core-io-rest-voice</feature>
		<feature>opensmarthouse-core-io-rest-mdns</feature>
		<feature>opensmarthouse-core-model-lsp</feature>
		<feature>opensmarthouse-core-model-item</feature>
		<feature>opensmarthouse-core-model-persistence</feature>
		<feature>opensmarthouse-core-model-rule</feature>
		<feature>opensmarthouse-core-model-script</feature>
		<feature>opensmarthouse-core-model-sitemap</feature>
		<feature>opensmarthouse-core-model-thing</feature>
		<feature>opensmarthouse-core-ui-icon</feature>
		<feature>opensmarthouse-core-storage-json</feature>
		<feature>opensmarthouse-runtime-certificate</feature>
		<feature>opensmarthouse-transport-mdns</feature>
		<feature>opensmarthouse-transport-http</feature>
		<feature prerequisite="true">shell</feature>
		<feature prerequisite="true">wrapper</feature>
		<feature prerequisite="true">jaas</feature>
		<!-- This bundle needs to be started early as it registers the 404 and startup pages on Jetty -->
		<!-- It is temperarily disabled due to https://github.com/opensmarthouse/opensmarthouse-core/issues/422 -->
		<!-- <bundle start-level="30">mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.ui.start/${project.version}</bundle> -->
		<bundle start-level="90">mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.boot/${project.version}</bundle>
		<bundle>mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.karaf/${project.version}</bundle>
		<config name="org.opensmarthouse.core.audio">
			defaultSink = enhancedjavasound
		</config>
		<config name="org.opensmarthouse.core.voice">
			defaultHLI = rulehli
		</config>
	</feature>

	<feature name="opensmarthouse-runtime-certificate" description="SSL Certificate Generator"
		version="${project.version}">
		<bundle start-level="20">mvn:org.opensmarthouse.core.bundles/org.opensmarthouse.core.io.jetty.certificate/${project.version}</bundle>
	</feature>

	<feature name="opensmarthouse-runtime-jna" description="Java Native Access (JNA)" version="${project.version}">
		<bundle>mvn:net.java.dev.jna/jna/${jna.version}</bundle>
		<bundle>mvn:net.java.dev.jna/jna-platform/${jna.version}</bundle>
	</feature>

	<feature name="opensmarthouse-transport-coap" description="CoAP Transport" version="${project.version}">
		<feature>opensmarthouse-core-io-transport-coap</feature>
	</feature>

	<feature name="opensmarthouse-transport-http" description="HTTP Transport" version="${project.version}">
		<capability>opensmarthouse.tp;feature=httpclient;version=${jetty.version}</capability>
		<feature>opensmarthouse-core-auth-oauth2client</feature>
		<bundle dependency="true">mvn:javax.servlet/javax.servlet-api/3.1.0</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty/jetty-client/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty/jetty-http/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty/jetty-util/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty/jetty-io/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty/jetty-proxy/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty.websocket/websocket-api/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty.websocket/websocket-common/${jetty.version}</bundle>
		<bundle dependency="true">mvn:org.eclipse.jetty.websocket/websocket-client/${jetty.version}</bundle>
	</feature>

	<feature name="opensmarthouse-transport-mdns" description="mDNS Transport" version="${project.version}">
		<feature>opensmarthouse-core-io-transport-mdns</feature>
	</feature>

	<feature name="opensmarthouse-transport-mqtt" description="MQTT Transport" version="${project.version}">
		<feature>opensmarthouse-core-io-transport-mqtt</feature>
	</feature>

	<feature name="opensmarthouse-transport-serial" description="Serial Transport" version="${project.version}">
		<feature>opensmarthouse-core-io-transport-serial-rfc2217</feature>
		<feature>opensmarthouse-core-config-serial</feature>
		<feature>opensmarthouse-core-config-discovery-usbserial</feature>
	</feature>

	<feature name="opensmarthouse-transport-upnp" description="UPnP Transport" version="${project.version}">
		<feature>opensmarthouse-core-io-transport-upnp</feature>
	</feature>

</features>
